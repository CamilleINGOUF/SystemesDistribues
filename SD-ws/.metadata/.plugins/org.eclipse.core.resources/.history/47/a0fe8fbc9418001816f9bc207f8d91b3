import java.awt.BorderLayout;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;

import common.Message;

public class ClientGUY extends JFrame 
{
	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;

	Client client;
	
	JTextArea display;
	JTextField text ;
	JList<String> group ;
	
	String name;
	
	public ClientGUY() 
	{
		BuildUI();
		client = new Client(name);
		
		setSize(800, 600);
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		setLocationRelativeTo(null);
		setResizable(false);
		setVisible(true);
		setTitle("Client");
	}
	
	private void BuildUI()
	{
		getContentPane().setLayout(new BorderLayout());
		
		text = new JTextField();
		getContentPane().add(text, BorderLayout.SOUTH);
		text.grabFocus();
		
		display = new JTextArea();
		display.setEditable(false);
		display.setLineWrap(true);
		JScrollPane scroll = new JScrollPane(display);
		add(scroll, BorderLayout.CENTER);
		getContentPane().add(scroll, BorderLayout.CENTER);
		
		group = new JList<>();
		group.setPrototypeCellValue("Greg is ze Best !");
		scroll = new JScrollPane(group);
		add(scroll, BorderLayout.EAST);
		
		addListeners();
	}
	
	private void addListeners() {
		text.addKeyListener(new KeyAdapter() {
			public void keyPressed(KeyEvent ev) {
				if (ev.getKeyCode() == KeyEvent.VK_ENTER) 
				{
					if(!text.getText().equals(""))
						client.sendMessage(new Message(name, null, text.getText()));
					
				}
			}
		});
	}
	
	public static void main(String[] args) 
	{
		new ClientGUY();
	}
}
